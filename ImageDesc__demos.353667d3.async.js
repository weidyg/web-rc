"use strict";(self.webpackChunkweb_react=self.webpackChunkweb_react||[]).push([[602],{90117:function(ie,y,n){n.r(y);var w=n(15558),j=n.n(w),z=n(26068),f=n.n(z),$=n(90228),U=n.n($),G=n(87999),H=n.n(G),k=n(48305),D=n.n(k),u=n(75271),V=n(66123),I=n(48481),J=n(76761),T=n(43658),N=n(81737),L=n(5933),Q=n(26493),X=n(28918),Y=n(20466),q=n(81630),ee=n(95730),S=n(84460),e=n(52676),ne=Array.from({length:10},function(C,a){return{value:"".concat(a),label:a==0?"\u5168\u90E8\u56FE\u7247":"\u76EE\u5F55".concat(a),children:a/3==0?[{value:"sub".concat(a),label:"\u5B50\u76EE\u5F55".concat(a),children:[]}]:[]}}),B=Array.from({length:100},function(C,a){return{id:a,name:"\u56FE\u7247".concat(a),size:8e3,pixel:"220*220",fullUrl:"https://picsum.photos/id/".concat(a,"/220/220")}}),te=function(a){var s=a.onOk,r=(0,u.useRef)(null),O=(0,u.useState)(!1),v=D()(O,2),h=v[0],l=v[1],_=(0,u.useState)([]),m=D()(_,2),i=m[0],p=m[1],M=function(R){l(R),setTimeout(function(){var g;p([]),r==null||(g=r.current)===null||g===void 0||g.clearSelected()},10)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(V.Z,{title:"\u9009\u62E9\u56FE\u7247",width:"fit-content",styles:{content:{width:"fit-content"}},open:h,onCancel:function(){return M(!1)},okButtonProps:{disabled:i.length==0},onOk:function(){s==null||s(i),M(!1)},children:(0,e.jsx)(K,{ref:r,mutiple:!0,onChange:function(R){p(R)}})}),(0,e.jsx)(I.ZP,{icon:(0,e.jsx)(X.Z,{}),shape:"round",type:"primary",onClick:function(){M(!0)},children:"\u6DFB\u52A0\u56FE\u7247"})]})},ae=function(a){var s=a.onOk,r=(0,u.useRef)(null),O=(0,u.useState)(!1),v=D()(O,2),h=v[0],l=v[1],_=function(i){l(i),setTimeout(function(){var p;r==null||(p=r.current)===null||p===void 0||p.clearSelected()},10)};return(0,e.jsx)(J.Z,{title:"\u9009\u62E9\u56FE\u7247",trigger:"click",arrow:!1,content:(0,e.jsx)(K,{ref:r,mutiple:!1,onChange:function(i){i.length>0&&(s==null||s(i[0]),l(!1))}}),open:h,destroyTooltipOnHide:!1,onOpenChange:function(i,p){_==null||_(i)},children:(0,e.jsx)(Y.Z,{style:{cursor:"pointer"}})})},K=(0,u.forwardRef)(function(C,a){var s=C.mutiple,r=C.onChange,O=(0,u.useState)({type:"picture",value:"",order:"timeDes"}),v=D()(O,2),h=v[0],l=v[1],_="0",m=(0,u.useState)(!1),i=D()(m,2),p=i[0],M=i[1],b=(0,u.useState)(),R=D()(b,2),g=R[0],_e=R[1],oe=(0,u.useState)(!1),W=D()(oe,2),F=W[0],A=W[1],P=(0,u.useRef)(null);(0,u.useImperativeHandle)(a,function(){return{refresh:function(){return x()},clearSelected:function(){var t;A(!1),P==null||(t=P.current)===null||t===void 0||t.clearSelected()}}}),(0,u.useEffect)(function(){g==null&&le()},[]);var x=function(){var t;P==null||(t=P.current)===null||t===void 0||t.refresh()},re=function(t){var c=t.files,o=c.filter(function(d){return d!=null}).map(function(d){return d.fullUrl})||[];r==null||r(o)},le=function(){var E=H()(U()().mark(function t(){return U()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:M(!0),setTimeout(function(){_e(ne),M(!1)},1e3);case 2:case"end":return o.stop()}},t)}));return function(){return E.apply(this,arguments)}}();return(0,e.jsxs)("div",{style:{width:"760px",height:"400px"},children:[(0,e.jsx)(S.ImageSpace,{ref:P,style:{display:F?"none":""},actionsRender:function(t){return(0,e.jsxs)(T.Z,{gap:4,style:{width:"100%"},wrap:!0,children:[t,(0,e.jsxs)(N.Z.Compact,{children:[(0,e.jsx)(L.default,{style:{width:"100px"},popupMatchSelectWidth:!1,value:h.type,options:[{label:"\u56FE\u7247",value:"picture"},{label:"\u540D\u79F0",value:"name"},{label:"\u5B9D\u8D1DID",value:"id"}],onChange:function(o){l(function(d){return f()(f()({},d),{},{type:o})})}}),(0,e.jsx)(Q.Z,{allowClear:!0,style:{width:"120px"},suffix:(0,e.jsx)(q.Z,{}),placeholder:"\u641C\u7D22",value:h.value,onChange:function(o){l(function(d){return f()(f()({},d),{},{value:o.target.value})})},onKeyDown:function(o){o.key==="Enter"&&x()}})]}),",",(0,e.jsx)(L.default,{options:[{label:"\u6587\u4EF6\u540D\u5347\u5E8F",value:"nameAsc"},{label:"\u6587\u4EF6\u540D\u964D\u5E8F",value:"nameDes"},{label:"\u4E0A\u4F20\u65F6\u95F4\u5347\u5E8F",value:"timeAsc"},{label:"\u4E0A\u4F20\u65F6\u95F4\u964D\u5E8F",value:"timeDes"}],value:h.order,onChange:function(o){l(function(d){return f()(f()({},d),{},{order:o})}),setTimeout(function(){x()},500)},style:{width:"128px"}}),(0,e.jsx)(T.Z,{gap:4,flex:1,justify:"flex-end",children:(0,e.jsx)(I.ZP,{onClick:function(){A(!0)},children:"\u4E0A\u4F20"})})]})},folderLoading:p,defaultFolder:_,folders:g||[],fetchData:function(t){var c=f()(f()({},t),h),o=c.page,d=c.size;return new Promise(function(ue,de){setTimeout(function(){var se=B.slice((o-1)*d,o*d).map(function(Z){return f()(f()({},Z),{},{id:Z.id+"_"+o})});ue({items:se,total:B.length})},1e3)})},mutiple:s,onChange:re}),(0,e.jsx)(S.ImageUploader,{style:{display:F?"":"none"},configRender:function(t){return(0,e.jsxs)(T.Z,{style:{width:"100%"},align:"center",justify:"space-between",children:[t,(0,e.jsx)(I.ZP,{onClick:function(){A(!1)},children:"\u53D6\u6D88\u4E0A\u4F20"})]})},folderLoading:p,defaultFolder:_,folders:g,upload:{action:"/",normalize:{uploadResponse:function(t){var c=t.Error,o=t.Result||{},d=f()(f()({},o),{},{error:c});return d}}},onUploaDone:function(){setTimeout(function(){A(!1)},1e3)}})]})});y.default=function(){var C=(0,u.useState)([]),a=D()(C,2),s=a[0],r=a[1];function O(l){var _=j()(s);_.splice(l,1),r(_)}function v(l,_){var m=j()(s);m[l]=_,r(m)}function h(l){r([].concat(j()(s),j()(l)))}return(0,e.jsx)(S.BizConfigProvider,{children:(0,e.jsx)(S.ImageDesc,{value:s,onChange:function(_){r(_)},actionsRender:{add:(0,e.jsx)(te,{onOk:h}),edit:function(_){return(0,e.jsx)(ae,{onOk:function(i){return v(_,i)}})},remove:function(_){return(0,e.jsx)(ee.Z,{style:{cursor:"pointer"},onClick:function(){return O(_)}})}}})})}}}]);
