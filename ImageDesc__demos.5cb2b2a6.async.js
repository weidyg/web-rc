"use strict";(self.webpackChunkweb_react=self.webpackChunkweb_react||[]).push([[602],{90117:function(ie,y,n){n.r(y);var w=n(15558),R=n.n(w),$=n(26068),d=n.n($),z=n(90228),L=n.n(z),G=n(87999),H=n.n(G),V=n(48305),g=n.n(V),s=n(75271),k=n(66123),S=n(48481),J=n(76761),A=n(43658),N=n(81737),B=n(5933),Q=n(26493),X=n(28918),Y=n(20466),q=n(81630),ee=n(95730),I=n(42651),T=n(25758),e=n(52676),ne=["https://pics.17qcc.com/imgextra/product/202408/20/15656633466472.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453139457026.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453141053334.jpg","https://pics.17qcc.com/imgextra/product/202408/20/15656633466472.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453139457026.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453141053334.jpg","https://pics.17qcc.com/imgextra/product/202408/20/15656633466472.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453139457026.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453141053334.jpg","https://pics.17qcc.com/imgextra/product/202408/20/15656633466472.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453139457026.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453141053334.jpg","https://pics.17qcc.com/imgextra/product/202408/20/15656633466472.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453139457026.jpg","https://pics.17qcc.com/imgextra/product/202408/20/10453141053334.jpg"],te=function(D){var l=D.onOk,r=(0,s.useRef)(null),E=(0,s.useState)(!1),m=g()(E,2),f=m[0],_=m[1],a=(0,s.useState)([]),p=g()(a,2),u=p[0],h=p[1],j=function(x){_(x),setTimeout(function(){var C;h([]),r==null||(C=r.current)===null||C===void 0||C.clearSelected()},10)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{title:"\u9009\u62E9\u56FE\u7247",width:"fit-content",styles:{content:{width:"fit-content"}},open:f,onCancel:function(){return j(!1)},okButtonProps:{disabled:u.length==0},onOk:function(){l==null||l(u),j(!1)},children:(0,e.jsx)(K,{ref:r,mutiple:!0,onChange:function(x){h(x)}})}),(0,e.jsx)(S.ZP,{icon:(0,e.jsx)(X.Z,{}),shape:"round",type:"primary",onClick:function(){j(!0)},children:"\u6DFB\u52A0\u56FE\u7247"})]})},ae=function(D){var l=D.onOk,r=(0,s.useRef)(null),E=(0,s.useState)(!1),m=g()(E,2),f=m[0],_=m[1],a=function(u){_(u),setTimeout(function(){var h;r==null||(h=r.current)===null||h===void 0||h.clearSelected()},10)};return(0,e.jsx)(J.Z,{title:"\u9009\u62E9\u56FE\u7247",trigger:"click",arrow:!1,content:(0,e.jsx)(K,{ref:r,mutiple:!1,onChange:function(u){u.length>0&&(l==null||l(u[0]),_(!1))}}),open:f,destroyTooltipOnHide:!1,onOpenChange:function(u,h){a==null||a(u)},children:(0,e.jsx)(Y.Z,{style:{cursor:"pointer"}})})},K=(0,s.forwardRef)(function(P,D){var l=P.mutiple,r=P.onChange,E=(0,s.useState)({type:"picture",value:"",order:"timeDes"}),m=g()(E,2),f=m[0],_=m[1],a="0",p=(0,s.useState)(!1),u=g()(p,2),h=u[0],j=u[1],M=(0,s.useState)(),x=g()(M,2),C=x[0],oe=x[1],re=(0,s.useState)(!1),W=g()(re,2),F=W[0],b=W[1],O=(0,s.useRef)(null);(0,s.useImperativeHandle)(D,function(){return{refresh:function(){return U()},clearSelected:function(){var t;b(!1),O==null||(t=O.current)===null||t===void 0||t.clearSelected()}}}),(0,s.useEffect)(function(){C==null&&se()},[]);var U=function(){var t;O==null||(t=O.current)===null||t===void 0||t.refresh()},_e=function(t){var c=t.files,o=c.filter(function(i){return i!=null}).map(function(i){return i.fullUrl})||[];r==null||r(o)},se=function(){var v=H()(L()().mark(function t(){return L()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:j(!0),setTimeout(function(){oe(T.dirs),j(!1)},1e3);case 2:case"end":return o.stop()}},t)}));return function(){return v.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{style:{width:"760px",height:"400px"},children:[(0,e.jsx)(I.ImageSpace,{ref:O,style:{display:F?"none":""},actionsRender:function(t){return(0,e.jsxs)(A.Z,{gap:4,style:{width:"100%"},wrap:!0,children:[t,(0,e.jsxs)(N.Z.Compact,{children:[(0,e.jsx)(B.default,{style:{width:"100px"},popupMatchSelectWidth:!1,value:f.type,options:[{label:"\u56FE\u7247",value:"picture"},{label:"\u540D\u79F0",value:"name"},{label:"\u5B9D\u8D1DID",value:"id"}],onChange:function(o){_(function(i){return d()(d()({},i),{},{type:o})})}}),(0,e.jsx)(Q.Z,{allowClear:!0,style:{width:"120px"},suffix:(0,e.jsx)(q.Z,{}),placeholder:"\u641C\u7D22",value:f.value,onChange:function(o){_(function(i){return d()(d()({},i),{},{value:o.target.value})})},onKeyDown:function(o){o.key==="Enter"&&U()}})]}),",",(0,e.jsx)(B.default,{options:[{label:"\u6587\u4EF6\u540D\u5347\u5E8F",value:"nameAsc"},{label:"\u6587\u4EF6\u540D\u964D\u5E8F",value:"nameDes"},{label:"\u4E0A\u4F20\u65F6\u95F4\u5347\u5E8F",value:"timeAsc"},{label:"\u4E0A\u4F20\u65F6\u95F4\u964D\u5E8F",value:"timeDes"}],value:f.order,onChange:function(o){_(function(i){return d()(d()({},i),{},{order:o})}),setTimeout(function(){U()},500)},style:{width:"128px"}}),(0,e.jsx)(A.Z,{gap:4,flex:1,justify:"flex-end",children:(0,e.jsx)(S.ZP,{onClick:function(){b(!0)},children:"\u4E0A\u4F20"})})]})},folderLoading:h,defaultFolder:a,folders:C||[],fetchData:function(t){var c=d()(d()({},t),f),o=c.page,i=c.size;return new Promise(function(le,ce){setTimeout(function(){var ue=T.files.slice((o-1)*i,o*i).map(function(Z){return d()(d()({},Z),{},{id:Z.id+"_"+o})});le({items:ue,total:T.files.length})},1e3)})},mutiple:l,onChange:_e}),(0,e.jsx)(I.ImageUploader,{style:{display:F?"":"none"},configRender:function(t){return(0,e.jsxs)(A.Z,{style:{width:"100%"},align:"center",justify:"space-between",children:[t,(0,e.jsx)(S.ZP,{onClick:function(){b(!1)},children:"\u53D6\u6D88\u4E0A\u4F20"})]})},folderLoading:h,defaultFolder:a,folders:C,upload:{action:"http://localhost:49007/api/services/app/ProductPublish/UploadImages",normalize:{uploadResponse:function(t){var c=t.Error,o=t.Result||{},i=d()(d()({},o),{},{error:c});return i}}},onUploaDone:function(){setTimeout(function(){b(!1)},1e3)}})]})})});y.default=function(){var P=(0,s.useState)(ne),D=g()(P,2),l=D[0],r=D[1];function E(_){var a=R()(l);a.splice(_,1),r(a)}function m(_,a){var p=R()(l);p[_]=a,r(p)}function f(_){r([].concat(R()(l),R()(_)))}return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(I.ImageDesc,{value:l,onChange:function(a){r(a)},actionsRender:{add:(0,e.jsx)(te,{onOk:f}),edit:function(a){return(0,e.jsx)(ae,{onOk:function(u){return m(a,u)}})},remove:function(a){return(0,e.jsx)(ee.Z,{style:{cursor:"pointer"},onClick:function(){return E(a)}})}}})})}}}]);
