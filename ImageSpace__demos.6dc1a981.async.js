"use strict";(self.webpackChunkweb_react=self.webpackChunkweb_react||[]).push([[6],{67298:function(W,E,e){e.r(E);var A=e(26068),u=e.n(A),U=e(67825),C=e.n(U),f=e(90228),P=e.n(f),b=e(87999),O=e.n(b),M=e(48481),R=e(75380),h=e(52676),T=["partnerID","accessToken","requestID"];E.default=function(){return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(M.ZP,{onClick:O()(P()().mark(function r(){var n,s,t,a,m,D,c,_;return P()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,v({partnerID:"QCCXXF5088X0",secret:"fYHGNCO6UBQyD5NsPZZGh6pajt14s2Ys"},!0);case 2:return s=o.sent,console.log(s),o.next=6,l({partnerID:"QCCXXF5088X0",templateCode:"fm_76130_standard_QCCXXF5088X0",customTemplateCode:"fm_76130_standard_custom_10030674830_5",accessToken:s==null?void 0:s.accessToken,documents:[{masterWaybillNo:"SF7444488695775",isPrintLogo:!0,customData:{OrderSort:"<%=_data.OrderSort%>",LogisticsWatermark:"<%=_data.LogisticsWatermark%>"}}]},!0);case 6:t=o.sent,console.log(t),(n=t.apiResultData)!==null&&n!==void 0&&n.success&&(m=(a=t.apiResultData)===null||a===void 0?void 0:a.obj,D=m.fileType,c=m.files,D=="cainiao"&&(_=c.map(function(d){var g=d.contents||[];return g.forEach(function(y){y.data={OrderSort:"11",LogisticsWatermark:"\u987A\u4E30"}}),{documentID:d.waybillNo,contents:g}}),p("Microsoft Print to PDF",_)));case 9:case"end":return o.stop()}},r)})),children:"COM_RECE_CLOUD_PRINT_CAINIAO"})})};function p(r,n){R.default.doPrint({type:R.WaybillType.CaiNiao,data:{printer:r,documents:n},onPrint:function(t){console.log("onPrint",t)},onRendered:function(t){console.log("onRendered",t)},onPrinted:function(t){console.log("onPrinted",t)},onFailed:function(t){console.log("onFailed",t)},onError:function(t){console.log("onError",t)}})}function l(r,n){var s=n?"https://sfapi-sbox.sf-express.com/std/service":"https://bspgw.sf-express.com/std/service",t=r.partnerID,a=r.accessToken,m=r.requestID,D=C()(r,T),c=u()({version:"2.0"},D),_="".concat(new Date().getTime()),i=Math.random(),o={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({partnerID:t,accessToken:a,requestID:m||"".concat(_).concat(i),serviceCode:"COM_RECE_CLOUD_PRINT_CAINIAO",timestamp:_,msgData:JSON.stringify(c)})};return I(s,o)}function v(r,n){var s=n?"https://sfapi-sbox.sf-express.com/oauth2/accessToken":"https://sfapi.sf-express.com/oauth2/accessToken",t={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:new URLSearchParams({partnerID:r==null?void 0:r.partnerID,secret:r==null?void 0:r.secret,grantType:"password"})};return I(s,t)}function I(r,n){return new Promise(function(s,t){fetch(r,n).then(function(a){return a.json()}).then(function(a){a=j(a),a.apiResultCode=="A1000"?s(a):t(a)}).catch(function(a){t(a)})})}var j=function(n){return typeof(n==null?void 0:n.apiResultData)=="string"&&(n.apiResultData=JSON.parse(n==null?void 0:n.apiResultData)),n}},41805:function(W,E,e){e.r(E);var A=e(26068),u=e.n(A),U=e(48305),C=e.n(U),f=e(75271),P=e(43658),b=e(48481),O=e(81737),M=e(5933),R=e(26493),h=e(81630),T=e(42651),p=e(28436),l=e(52676);E.default=function(){var v=(0,f.useRef)(null),I=(0,f.useState)(!1),j=C()(I,2),r=j[0],n=j[1],s=(0,f.useState)({type:"picture",value:"",order:"timeDes"}),t=C()(s,2),a=t[0],m=t[1];(0,f.useEffect)(function(){D()},[a.order]);var D=function(){var _;v==null||(_=v.current)===null||_===void 0||_.refresh()};return(0,l.jsx)("div",{style:{width:"calc(100vw - 0px)",height:"calc(100vh - 0px)",overflow:"hidden"},children:r?(0,l.jsx)(T.ImageUploader,{configRender:function(_){return(0,l.jsxs)(P.Z,{style:{width:"100%"},align:"center",justify:"space-between",children:[_,(0,l.jsx)(b.ZP,{onClick:function(){n(!1)},children:"\u53D6\u6D88\u4E0A\u4F20"})]})},defaultFolder:"0",folders:function(){return new Promise(function(_,i){setTimeout(function(){_(p.dirs)},1e3)})},upload:{action:"http://localhost:49007/api/services/app/ProductPublish/UploadImages",normalize:{uploadResponse:function(_){var i=_.Error,o=_.Result||{},d=u()(u()({},o),{},{error:i});return d}}},onUploaDone:function(){setTimeout(function(){n(!1)},1e3)}}):(0,l.jsx)(T.ImageSpace,{ref:v,actionsRender:function(_){return(0,l.jsxs)(P.Z,{style:{width:"100%"},align:"flex-start",justify:"space-between",children:[(0,l.jsxs)(O.Z,{wrap:!0,children:[_,(0,l.jsxs)(O.Z.Compact,{children:[(0,l.jsx)(M.default,{style:{width:"100px"},popupMatchSelectWidth:!1,value:a.type,options:[{label:"\u56FE\u7247",value:"picture"},{label:"\u5B9D\u8D1D\u540D\u79F0",value:"name"},{label:"\u5B9D\u8D1DID",value:"id"}],onChange:function(o){m(function(d){return u()(u()({},d),{},{type:o})})}}),(0,l.jsx)(R.Z,{allowClear:!0,style:{width:"180px"},suffix:(0,l.jsx)(h.Z,{}),placeholder:"\u641C\u7D22",value:a.value,onChange:function(o){m(function(d){return u()(u()({},d),{},{value:o.target.value})})},onKeyDown:function(o){o.key==="Enter"&&D()}})]}),(0,l.jsx)(M.default,{options:[{label:"\u6587\u4EF6\u540D\u5347\u5E8F",value:"nameAsc"},{label:"\u6587\u4EF6\u540D\u964D\u5E8F",value:"nameDes"},{label:"\u4E0A\u4F20\u65F6\u95F4\u5347\u5E8F",value:"timeAsc"},{label:"\u4E0A\u4F20\u65F6\u95F4\u964D\u5E8F",value:"timeDes"}],value:a.order,onChange:function(o){m(function(d){return u()(u()({},d),{},{order:o})})},style:{width:"147px"}})]}),(0,l.jsx)(b.ZP,{onClick:function(){n(!0)},children:"\u4E0A\u4F20"})]})},defaultFolder:"0",folders:function(){return new Promise(function(_,i){setTimeout(function(){_(p.dirs)},1e3)})},fetchData:function(_){var i=u()(u()({},_),a),o=i.page,d=i.size;return new Promise(function(g,y){setTimeout(function(){var x=p.files.slice((o-1)*d,o*d).map(function(L){return u()(u()({},L),{},{id:L.id+"_"+o})});g({items:x,total:p.files.length})},1e3)})}})})}}}]);
